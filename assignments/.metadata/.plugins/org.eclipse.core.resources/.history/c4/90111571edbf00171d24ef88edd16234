package com.revature.BankingSystem.BankingUI;

import com.revature.BankingSystem.BankClasses.*;
import com.revature.BankingSystem.BankDataManagement.UserList;

public class UserManager extends UIElement {
	/*
	 * UI for admins managing users and users' accounts
	 */
	private UserList userList;
	private AccountManager accMan;

	public UserManager(UserList userList) {
		super();
		this.userList = userList;
	}

	public void UserManagment() {

		boolean userManageFlag = true;

		do {

			System.out.println(
					"\n1 - Manage a Client's account(s)" + "\n2 -Remove an User" + "\n3 - Create new Client User"
							+ "\n4 - Create new Admin User" + "\n5 - User Overview" + "\n0 - Exit User Management\n");
			int userMenu;
			if (userList.getClientList().size() != 0) {
				userMenu = getUIn().getInt(0, 5);
			} else if (userList.getClientList().size() == 0) {
				do {
					if (userMenu == 1) {
						System.out.println("No Clients cannot manage client accounts");
					}
					userMenu = getUIn().getInt(0, 5);
				} while (userMenu != 1);
			}
			switch (userMenu) {
			case 0:
				userManageFlag = false;
				break;
			case 1:
				manageClient();
				break;
			case 2:
				removeUser();
				break;
			case 3:
				createClient();
				break;
			case 4:
				createAdmin();
				break;
			case 5:
				overview();
				break;
			default:
				break;
			}
		} while (userManageFlag);

	}

	private void manageClient(){
		ClientUser cu =  chooseClient();
		accMan = new AccountManager(cu);
		System.out.println("Managing Client: "+ cu);
		accMan.AccounManagment();
	}
	private void removeUser(){
		User u = chooseUser();
		userList.remove(u);
	}
	private void createClient(){
		boolean uFlag = true;
		String userName = "0";
		do {

			System.out.print("Enter Username: ");
			userName = getUIn().getString();
			if (userName.equals("0")) {
				// 0 username is used by login() as a special option
				System.out.println("username cannot be 0");
			} else if (usernameValidation(userName)) {
				// can't use someone elses username
				System.out.println("username not available");
			} else {
				uFlag = false;
			}
		} while (uFlag);

		System.out.print("Enter First Name: ");
		String firstName = getUIn().getString();

		System.out.print("Enter Last Name: ");
		String lastName = getUIn().getString();

		System.out.print("Enter Password: ");
		String password = getUIn().getString();

		userList.addClientUser(userName, firstName, lastName, password);
		System.out.println("User: " + userList.get(userList.numberOfUsers() - 1) + " created.");
	}
	private void createAdmin(){
		
	}
	private void overview(){
		
	}
	
	private ClientUser chooseClient() {

		System.out.println("Choose Client to manage: ");
		for (int i = 0; i < userList.getClientList().size(); i++) {
			System.out.println("" + (i + 1) + " - " + userList.getClientList().get(i));
		}

		int userMenu = getUIn().getInt(1, userList.getClientList().size()) - 1;

		return userList.getClientList().get(userMenu);
	}
	private ClientUser chooseUser() {

		System.out.println("Choose User to manage: ");
		for (int i = 0; i < userList.numberOfUsers(); i++) {
			System.out.println("" + (i + 1) + " - " + userList.get(i));
		}

		int userMenu = getUIn().getInt(1, userList.numberOfUsers()) - 1;

		return userList.getClientList().get(userMenu);
	}
}
